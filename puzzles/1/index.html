<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="灘パズルサークルの2025年文化祭用サイトです。部員が作成した問題を解くことができます。">
        <meta name="author" content="k_sub">
        <title>灘パズルサークル｜2025年文化祭</title>
        <link rel="stylesheet" href="/tpl/style.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    </head>
    <body>
        <header></header>
        <script src="/tpl/header.js"></script>
        <main>
            <div id="puzzle-header">
                <div id="puzzle-progress">
                    <div id="puzzle-name"></div>
                    <div id="puzzle-difficulty"></div>
                </div>
                <div>
                    <div id="make-progress">解答を記録する</div>
                    <a id="puzzle-link">拡大した画面で解く</a>
                </div>
                <div id="puzzle-rule"></div>
            </div>
            <iframe id="puzzle-frame"></iframe>
            <script type="module">
                import { PuzzleData, PuzzleName, PuzzleRule } from '/puzzles/puzzles.js';
                const path = location.pathname.split('/');
                const data = PuzzleData.get(path[path.indexOf('puzzles')+1]);
                document.getElementById('puzzle-name').innerHTML = data.name;
                document.getElementById('puzzle-difficulty').innerHTML = data.difficulty;
                document.getElementById('puzzle-link').href= data.link;
                document.getElementById('puzzle-rule').innerHTML = PuzzleRule.get(data.name);
                document.getElementById('puzzle-frame').src = data.link;
                const progress = localStorage.getItem(`progress_${path[path.indexOf('puzzles')+1]}`) ?? false;
                if (progress === false) {
                    localStorage.setItem(`progress_${path[path.indexOf('puzzles')+1]}`, 'false');
                }
                else if (progress == 'false') {
                    document.getElementById('puzzle-progress').style.backgroundColor = 'white';
                }
                else if (progress == 'true') {
                    document.getElementById('puzzle-progress').style.backgroundColor = 'lightgreen';
                }
            </script>
        </main>
    </body>
</html>
